{"version":3,"file":"index.js","sources":["../src/web-component/ay-accordion-root/index.ts","../src/web-component/ay-accordion/index.ts","../src/web-component/ay-accordion-header/index.ts"],"sourcesContent":["/*! Copyright 2020 Ayogo Health Inc. */\n/**\n * ay-accordion-root is a web-component which wraps the ay-accordion elements as its children.\n *\n * ay-accordion-root can take on the following attributes\n * multiple: This attribute allows multiple accordion sections to be open at the same time (default is only a single section expanded at a time).\n *\n * For example:\n * ```\n * <ay-accordion-root>\n *  <ay-accordion>\n *   <ay-accordion-header>\n *     Button Name\n *    </ay-accordion-header>\n *    <p> Some content </p>\n *  </ay-accordion>\n * </ay-accordion-root>\n * ```\n *\n * @name ay-accordion-root\n *\n */\n\nconst useClipPath = window.CSS && window.CSS.supports && window.CSS.supports('clip-path', 'inset(0px 0px 0px 0px)');\n\nfunction run (fn, accordion : HTMLElement) {\n  let root = accordion.closest('ay-accordion-root') as HTMLElement;\n  let elementsToWatch = Array.prototype.filter.call(root.childNodes, function(el) {\n    return el.nodeType === 1;\n  });\n\n  let preRoot = root.getBoundingClientRect();\n\n  // Take initial measurements\n  let measurements = Array.prototype.map.call(elementsToWatch, function(el) {\n     return {\n      el: el,\n      initialDimensions:  el.getBoundingClientRect(),\n      initialTransform:   el.style.transform || ''\n     };\n  });\n\n  root.style.minHeight = preRoot.height + 'px';\n\n  if(!root.hasAttribute('multiple')) {\n    //Close existing panels if needed\n    root.querySelectorAll('ay-accordion').forEach((acc) => {\n      if(acc.hasAttribute('open') && acc != accordion) {\n        acc.removeAttribute('open');\n      }\n    });\n  }\n\n  //Run the function to chaneg the state\n  fn();\n\n  Array.prototype.forEach.call(measurements, function(m) {\n    m.newDimensions = m.el.getBoundingClientRect();\n\n    m.newScale = {\n      x: m.initialDimensions.width / m.newDimensions.width,\n      y: m.initialDimensions.height / m.newDimensions.height\n    };\n\n    m.clipSize = {\n      x: m.newDimensions.width - m.initialDimensions.width,\n      y: m.newDimensions.height - m.initialDimensions.height\n    };\n\n    m.newOffset = {\n      x: m.initialDimensions.left - m.newDimensions.left,\n      y: m.initialDimensions.top - m.newDimensions.top\n    };\n\n    m.el.style.transformOrigin = \"0 0\";\n    m.el.style.willChange = useClipPath ? 'transform, clip-path' : 'transform';\n    m.children = [];\n\n    // Set the grandchildren to the inverse transform\n    if (m.initialDimensions.height !== m.newDimensions.height ||\n      m.initialDimensions.width  !== m.newDimensions.width) {\n\n      m.children = Array.prototype.filter.call(m.el.childNodes, function(el) {\n        return el.nodeType === 1;\n      });\n\n      if (!useClipPath) {\n        Array.prototype.forEach.call(m.children, function(el) {\n          var elDimensions = el.getBoundingClientRect();\n          var offsetFromParent = {\n            x: m.newDimensions.left - elDimensions.left,\n            y: m.newDimensions.top  - elDimensions.top\n          };\n\n          var origin = offsetFromParent.x + 'px ';\n          origin += offsetFromParent.y + 'px';\n\n          el.style.transformOrigin = origin;\n          el.style.willChange = 'transform'\n\n        });\n      }\n    }\n  });\n\n\n  var duration = 150; // In milliseconds\n  var t = 1;\n\n  function tween() {\n    Array.prototype.forEach.call(measurements, function(m) {\n      if (m.initialDimensions.height === m.newDimensions.height &&\n          m.initialDimensions.width  === m.newDimensions.width  &&\n          m.initialDimensions.left   === m.newDimensions.left   &&\n          m.initialDimensions.top    === m.newDimensions.top) {\n          return;\n      }\n\n      var tScaleX   = 1 + (m.newScale.x - 1) * t;\n      var tScaleY   = 1 + (m.newScale.y - 1) * t;\n      var tOffsetX  = m.newOffset.x * t;\n      var tOffsetY  = m.newOffset.y * t;\n\n      var tClipX = m.clipSize.x * t;\n      var tClipY = m.clipSize.y * t;\n\n      var transform = 'translate(';\n      transform += tOffsetX + 'px, ';\n      transform += tOffsetY + 'px) ';\n      if (!useClipPath) {\n        transform += 'scale(' + tScaleX + ',' + tScaleY + ') ';\n      }\n      transform += m.initialTransform;\n\n      m.el.style.transform = transform;\n\n      if (!useClipPath) {\n        Array.prototype.forEach.call(m.children, function(el) {\n          var scale = 'scale(' + (1/tScaleX) + ',' + (1/tScaleY) + ')';\n          el.style.transform = scale;\n        });\n      } else {\n        m.el.style.clipPath = 'inset(0px ' + tClipX + 'px ' + tClipY + 'px 0px)';\n      }\n    });\n\n    t -= (16 / duration);\n\n    if (t > 0) {\n      requestAnimationFrame(tween);\n    } else {\n      cleanup();\n    }\n  }\n\n  tween();\n\n  function cleanup() {\n    Array.prototype.forEach.call(measurements, function(m) {\n      m.el.style.transformOrigin = '';\n      m.el.style.transform = m.initialTransform;\n      m.el.style.willChange = '';\n      m.el.style.clipPath = '';\n\n      Array.prototype.forEach.call(m.children, function(el) {\n        el.style.transformOrigin = '';\n        el.style.transform = '';\n        el.style.willChange = '';\n      });\n    });\n\n    root.style.minHeight = null;\n\n    var scrollingRoot = document['scrollingElement'] || document.body;\n    var pageBottom = scrollingRoot.scrollTop + scrollingRoot.clientHeight;\n    var lastChild = measurements.pop();\n    if (lastChild.initialDimensions.height !== lastChild.newDimensions.height && (pageBottom - lastChild.initialDimensions.bottom < lastChild.initialDimensions.height)) {\n      window.scrollBy(0, (lastChild.newDimensions.height - lastChild.initialDimensions.height));\n    }\n  }\n\n}\n\nexport class AyAccordionRoot extends HTMLElement {\n\n}\n\nif (window.customElements) {\n  customElements.define('ay-accordion-root', AyAccordionRoot);\n}\n\nexport { run }\n","/*! Copyright 2019 Ayogo Health Inc. */\n/**\n * ay-accordion is a web-component that enables hiding and showing of its child nodes by the use of click handlers\n * It must have an ay-accordion-header element as child and this acts as a button for toggling ay-accordion.\n *\n * ay-accordion can take on the following attributes\n * 1) open - If open exists then the children will not be hidden\n * 2) disable - If disable is present then the toggling functionality will not work however the existence of open attribute\n *    will still be acknowledged.\n *\n * For example:\n * ```\n * <ay-accordion>\n *  <ay-accordion-header>\n *    Button Name\n *  </ay-accordion-header>\n *  <p> Some content </p>\n * </ay-accordion>\n * ```\n *\n * @name ay-accordion\n *\n */\n\n import { run } from '../ay-accordion-root/index'\n\nconst accordionEventMap: WeakMap<HTMLElement, () => void> = new WeakMap();\n\nexport class AyAccordion extends HTMLElement {\n  //Add event listeners for the dispatched events from the ay-acc-hed\n\n  childCallback(el) {\n    if (el.tagName === 'AY-ACCORDION-HEADER') {\n      return;\n    }\n    if (this.hasAttribute('open')) {\n      el.removeAttribute('hidden');\n    } else {\n      el.setAttribute('hidden', '');\n    }\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'disabled') {\n      if (this.hasAttribute('disabled')) {\n        this.querySelectorAll('ay-accordion-header').forEach( (el) => {\n          el.setAttribute('aria-disabled', 'true');\n        });\n      } else {\n        this.querySelectorAll('ay-accordion-header').forEach( (el) => {\n          el.setAttribute('aria-disabled', 'false');\n        });\n      }\n    }\n\n    if (name === 'open') {\n      if (this.open) {\n        this.setAttribute('aria-expanded', 'true');\n        Array.prototype.forEach.call(this.children, function (el) {\n          if (!(el.tagName === 'AY-ACCORDION-HEADER')) {\n            el.removeAttribute('hidden');\n          }\n        });\n      } else {\n        this.setAttribute('aria-expanded', 'false');\n        Array.prototype.forEach.call(this.children, function(el) {\n          if (!(el.tagName === 'AY-ACCORDION-HEADER')) {\n            el.setAttribute('hidden', '');\n          }\n        });\n      }\n    }\n  }\n\n  connectedCallback() {\n    const childObserver = new MutationObserver(() => {\n      Array.prototype.forEach.call(this.children, (el) => this.childCallback(el));\n    });\n\n    childObserver.observe(this, { childList: true });\n\n    if (this.hasAttribute('open')){\n      this.setAttribute('aria-expanded', 'true');\n    } else {\n      this.setAttribute('aria-expanded', 'false');\n    }\n\n    const handleToggle = () => {\n      if (this.hasAttribute('disabled')) {\n        return;\n      }\n      run(() => {\n        this.open = !this.open;\n      }, this );\n\n    };\n\n    this.addEventListener('toggle', handleToggle);\n  }\n\n  disconnectedCallback() {\n    if (accordionEventMap.has(this)){\n      this.removeEventListener('toggle', accordionEventMap.get(this));\n    }\n    accordionEventMap.delete(this);\n  }\n\n  set open(value: boolean) {\n    if (value) {\n      this.setAttribute('open', '');\n    } else {\n      this.removeAttribute('open');\n    }\n  }\n\n  get open(): boolean{\n    return this.hasAttribute('open');\n  }\n\n  static get observedAttributes() {\n    return ['open', 'disabled'];\n  }\n\n}\n\nif (window.customElements) {\n  customElements.define('ay-accordion', AyAccordion);\n}\n\n","/*! Copyright 2019 Ayogo Health Inc. */\n/**\n *\n *\n * ay-accordion-header acts as a button for its first parent ay-accordion element thereby enabling the toggle functionality\n *\n * For example:\n * ```\n * <ay-accordion-header>\n *  Button Name\n * </ay-accordion-header>\n * ```\n *\n * @name ay-accordion-header\n *\n */\n\nconst accordionHeaderClickMap : WeakMap<HTMLElement, () => void> = new WeakMap();\nconst accordionHeaderPressMap : WeakMap<HTMLElement, (event: KeyboardEvent) => void> = new WeakMap();\n\nexport class AyAccordionHeader extends HTMLElement {\n\n  connectedCallback() {\n\n    this.setAttribute('role', 'button');\n    this.setAttribute('tabIndex', '0');\n\n    const ayAccordionElem = this.closest('ay-accordion') as HTMLElement;\n\n    if (ayAccordionElem.hasAttribute('disabled')){\n      this.setAttribute('aria-disabled', 'true');\n    } else {\n      this.setAttribute('aria-disabled', 'false');\n    }\n\n    const toggleOnClick = () => {\n      const ayAccordionElem = this.closest('ay-accordion') as HTMLElement;\n      ayAccordionElem.dispatchEvent(new Event('toggle'));\n    };\n\n    const toggleOnPress = (event: KeyboardEvent) => {\n      const ayAccordionElem = this.closest('ay-accordion') as HTMLElement;\n      if (event.keyCode === 32 || event.keyCode === 13) {\n        ayAccordionElem.dispatchEvent(new Event('toggle'));\n      }\n    };\n\n    this.addEventListener('click', toggleOnClick);\n    this.addEventListener('keydown', toggleOnPress);\n\n    accordionHeaderClickMap.set(this, toggleOnClick);\n    accordionHeaderPressMap.set(this, toggleOnPress);\n\n  }\n\n\n  disconnectedCallback() {\n\n    if (accordionHeaderPressMap.has(this)){\n      this.removeEventListener('keydown', accordionHeaderPressMap.get(this));\n    }\n\n    if (accordionHeaderClickMap.has(this)){\n      this.removeEventListener('click', accordionHeaderClickMap.get(this));\n    }\n    accordionHeaderClickMap.delete(this);\n    accordionHeaderPressMap.delete(this);\n  }\n}\n\nif (window.customElements) {\n  customElements.define('ay-accordion-header', AyAccordionHeader);\n}\n\n"],"names":[],"mappings":";;;;;;IAAA;IAuBA,MAAM,WAAW,GAAG,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,QAAQ,IAAI,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,EAAE,wBAAwB,CAAC,CAAC;IAEpH,SAAS,GAAG,CAAE,EAAE,EAAE,SAAuB;QACvC,IAAI,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,mBAAmB,CAAgB,CAAC;QACjE,IAAI,eAAe,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,UAAS,EAAE;YAC5E,OAAO,EAAE,CAAC,QAAQ,KAAK,CAAC,CAAC;SAC1B,CAAC,CAAC;QAEH,IAAI,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAG3C,IAAI,YAAY,GAAG,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE,UAAS,EAAE;YACrE,OAAO;gBACN,EAAE,EAAE,EAAE;gBACN,iBAAiB,EAAG,EAAE,CAAC,qBAAqB,EAAE;gBAC9C,gBAAgB,EAAI,EAAE,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE;aAC5C,CAAC;SACJ,CAAC,CAAC;QAEH,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;QAE7C,IAAG,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;YAEjC,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG;gBAChD,IAAG,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,SAAS,EAAE;oBAC/C,GAAG,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;iBAC7B;aACF,CAAC,CAAC;SACJ;QAGD,EAAE,EAAE,CAAC;QAEL,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,UAAS,CAAC;YACnD,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,EAAE,CAAC,qBAAqB,EAAE,CAAC;YAE/C,CAAC,CAAC,QAAQ,GAAG;gBACX,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC,KAAK,GAAG,CAAC,CAAC,aAAa,CAAC,KAAK;gBACpD,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,aAAa,CAAC,MAAM;aACvD,CAAC;YAEF,CAAC,CAAC,QAAQ,GAAG;gBACX,CAAC,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC,iBAAiB,CAAC,KAAK;gBACpD,CAAC,EAAE,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,iBAAiB,CAAC,MAAM;aACvD,CAAC;YAEF,CAAC,CAAC,SAAS,GAAG;gBACZ,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC,IAAI,GAAG,CAAC,CAAC,aAAa,CAAC,IAAI;gBAClD,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC,GAAG,GAAG,CAAC,CAAC,aAAa,CAAC,GAAG;aACjD,CAAC;YAEF,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,eAAe,GAAG,KAAK,CAAC;YACnC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,WAAW,GAAG,sBAAsB,GAAG,WAAW,CAAC;YAC3E,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC;YAGhB,IAAI,CAAC,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,CAAC,aAAa,CAAC,MAAM;gBACvD,CAAC,CAAC,iBAAiB,CAAC,KAAK,KAAM,CAAC,CAAC,aAAa,CAAC,KAAK,EAAE;gBAEtD,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE,UAAS,EAAE;oBACnE,OAAO,EAAE,CAAC,QAAQ,KAAK,CAAC,CAAC;iBAC1B,CAAC,CAAC;gBAEH,IAAI,CAAC,WAAW,EAAE;oBAChB,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE,UAAS,EAAE;wBAClD,IAAI,YAAY,GAAG,EAAE,CAAC,qBAAqB,EAAE,CAAC;wBAC9C,IAAI,gBAAgB,GAAG;4BACrB,CAAC,EAAE,CAAC,CAAC,aAAa,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI;4BAC3C,CAAC,EAAE,CAAC,CAAC,aAAa,CAAC,GAAG,GAAI,YAAY,CAAC,GAAG;yBAC3C,CAAC;wBAEF,IAAI,MAAM,GAAG,gBAAgB,CAAC,CAAC,GAAG,KAAK,CAAC;wBACxC,MAAM,IAAI,gBAAgB,CAAC,CAAC,GAAG,IAAI,CAAC;wBAEpC,EAAE,CAAC,KAAK,CAAC,eAAe,GAAG,MAAM,CAAC;wBAClC,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,WAAW,CAAA;qBAElC,CAAC,CAAC;iBACJ;aACF;SACF,CAAC,CAAC;QAGH,IAAI,QAAQ,GAAG,GAAG,CAAC;QACnB,IAAI,CAAC,GAAG,CAAC,CAAC;QAEV,SAAS,KAAK;YACZ,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,UAAS,CAAC;gBACnD,IAAI,CAAC,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,CAAC,aAAa,CAAC,MAAM;oBACrD,CAAC,CAAC,iBAAiB,CAAC,KAAK,KAAM,CAAC,CAAC,aAAa,CAAC,KAAK;oBACpD,CAAC,CAAC,iBAAiB,CAAC,IAAI,KAAO,CAAC,CAAC,aAAa,CAAC,IAAI;oBACnD,CAAC,CAAC,iBAAiB,CAAC,GAAG,KAAQ,CAAC,CAAC,aAAa,CAAC,GAAG,EAAE;oBACpD,OAAO;iBACV;gBAED,IAAI,OAAO,GAAK,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAC3C,IAAI,OAAO,GAAK,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAC3C,IAAI,QAAQ,GAAI,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;gBAClC,IAAI,QAAQ,GAAI,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;gBAElC,IAAI,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;gBAC9B,IAAI,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;gBAE9B,IAAI,SAAS,GAAG,YAAY,CAAC;gBAC7B,SAAS,IAAI,QAAQ,GAAG,MAAM,CAAC;gBAC/B,SAAS,IAAI,QAAQ,GAAG,MAAM,CAAC;gBAC/B,IAAI,CAAC,WAAW,EAAE;oBAChB,SAAS,IAAI,QAAQ,GAAG,OAAO,GAAG,GAAG,GAAG,OAAO,GAAG,IAAI,CAAC;iBACxD;gBACD,SAAS,IAAI,CAAC,CAAC,gBAAgB,CAAC;gBAEhC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;gBAEjC,IAAI,CAAC,WAAW,EAAE;oBAChB,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE,UAAS,EAAE;wBAClD,IAAI,KAAK,GAAG,QAAQ,IAAI,CAAC,GAAC,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,GAAC,OAAO,CAAC,GAAG,GAAG,CAAC;wBAC7D,EAAE,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;qBAC5B,CAAC,CAAC;iBACJ;qBAAM;oBACL,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,GAAG,YAAY,GAAG,MAAM,GAAG,KAAK,GAAG,MAAM,GAAG,SAAS,CAAC;iBAC1E;aACF,CAAC,CAAC;YAEH,CAAC,KAAK,EAAE,GAAG,QAAQ,CAAC,CAAC;YAErB,IAAI,CAAC,GAAG,CAAC,EAAE;gBACT,qBAAqB,CAAC,KAAK,CAAC,CAAC;aAC9B;iBAAM;gBACL,OAAO,EAAE,CAAC;aACX;SACF;QAED,KAAK,EAAE,CAAC;QAER,SAAS,OAAO;YACd,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,UAAS,CAAC;gBACnD,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,eAAe,GAAG,EAAE,CAAC;gBAChC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,gBAAgB,CAAC;gBAC1C,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;gBAC3B,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;gBAEzB,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE,UAAS,EAAE;oBAClD,EAAE,CAAC,KAAK,CAAC,eAAe,GAAG,EAAE,CAAC;oBAC9B,EAAE,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;oBACxB,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;iBAC1B,CAAC,CAAC;aACJ,CAAC,CAAC;YAEH,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;YAE5B,IAAI,aAAa,GAAG,QAAQ,CAAC,kBAAkB,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC;YAClE,IAAI,UAAU,GAAG,aAAa,CAAC,SAAS,GAAG,aAAa,CAAC,YAAY,CAAC;YACtE,IAAI,SAAS,GAAG,YAAY,CAAC,GAAG,EAAE,CAAC;YACnC,IAAI,SAAS,CAAC,iBAAiB,CAAC,MAAM,KAAK,SAAS,CAAC,aAAa,CAAC,MAAM,KAAK,UAAU,GAAG,SAAS,CAAC,iBAAiB,CAAC,MAAM,GAAG,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE;gBACnK,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,SAAS,CAAC,aAAa,CAAC,MAAM,GAAG,SAAS,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC;aAC3F;SACF;IAEH,CAAC;UAEY,eAAgB,SAAQ,WAAW;KAE/C;IAED,IAAI,MAAM,CAAC,cAAc,EAAE;QACzB,cAAc,CAAC,MAAM,CAAC,mBAAmB,EAAE,eAAe,CAAC,CAAC;;;IC5L9D;IA0BA,MAAM,iBAAiB,GAAqC,IAAI,OAAO,EAAE,CAAC;UAE7D,WAAY,SAAQ,WAAW;QAG1C,aAAa,CAAC,EAAE;YACd,IAAI,EAAE,CAAC,OAAO,KAAK,qBAAqB,EAAE;gBACxC,OAAO;aACR;YACD,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE;gBAC7B,EAAE,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;aAC9B;iBAAM;gBACL,EAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;aAC/B;SACF;QAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ;YAC/C,IAAI,IAAI,KAAK,UAAU,EAAE;gBACvB,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;oBACjC,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,CAAC,OAAO,CAAE,CAAC,EAAE;wBACvD,EAAE,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;qBAC1C,CAAC,CAAC;iBACJ;qBAAM;oBACL,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,CAAC,OAAO,CAAE,CAAC,EAAE;wBACvD,EAAE,CAAC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;qBAC3C,CAAC,CAAC;iBACJ;aACF;YAED,IAAI,IAAI,KAAK,MAAM,EAAE;gBACnB,IAAI,IAAI,CAAC,IAAI,EAAE;oBACb,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;oBAC3C,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE;wBACtD,IAAI,EAAE,EAAE,CAAC,OAAO,KAAK,qBAAqB,CAAC,EAAE;4BAC3C,EAAE,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;yBAC9B;qBACF,CAAC,CAAC;iBACJ;qBAAM;oBACL,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;oBAC5C,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAS,EAAE;wBACrD,IAAI,EAAE,EAAE,CAAC,OAAO,KAAK,qBAAqB,CAAC,EAAE;4BAC3C,EAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;yBAC/B;qBACF,CAAC,CAAC;iBACJ;aACF;SACF;QAED,iBAAiB;YACf,MAAM,aAAa,GAAG,IAAI,gBAAgB,CAAC;gBACzC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC,CAAC;aAC7E,CAAC,CAAC;YAEH,aAAa,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;YAEjD,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAC;gBAC5B,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;aAC5C;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;aAC7C;YAED,MAAM,YAAY,GAAG;gBACnB,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;oBACjC,OAAO;iBACR;gBACD,GAAG,CAAC;oBACF,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;iBACxB,EAAE,IAAI,CAAE,CAAC;aAEX,CAAC;YAEF,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;SAC/C;QAED,oBAAoB;YAClB,IAAI,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC;gBAC9B,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;aACjE;YACD,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAChC;QAED,IAAI,IAAI,CAAC,KAAc;YACrB,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;aAC/B;iBAAM;gBACL,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;aAC9B;SACF;QAED,IAAI,IAAI;YACN,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;SAClC;QAED,WAAW,kBAAkB;YAC3B,OAAO,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;SAC7B;KAEF;IAED,IAAI,MAAM,CAAC,cAAc,EAAE;QACzB,cAAc,CAAC,MAAM,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;;;IC9HrD;IAiBA,MAAM,uBAAuB,GAAsC,IAAI,OAAO,EAAE,CAAC;IACjF,MAAM,uBAAuB,GAA0D,IAAI,OAAO,EAAE,CAAC;UAExF,iBAAkB,SAAQ,WAAW;QAEhD,iBAAiB;YAEf,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YACpC,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;YAEnC,MAAM,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAgB,CAAC;YAEpE,IAAI,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC,EAAC;gBAC3C,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;aAC5C;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;aAC7C;YAED,MAAM,aAAa,GAAG;gBACpB,MAAM,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAgB,CAAC;gBACpE,eAAe,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;aACpD,CAAC;YAEF,MAAM,aAAa,GAAG,CAAC,KAAoB;gBACzC,MAAM,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAgB,CAAC;gBACpE,IAAI,KAAK,CAAC,OAAO,KAAK,EAAE,IAAI,KAAK,CAAC,OAAO,KAAK,EAAE,EAAE;oBAChD,eAAe,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;iBACpD;aACF,CAAC;YAEF,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;YAC9C,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;YAEhD,uBAAuB,CAAC,GAAG,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YACjD,uBAAuB,CAAC,GAAG,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;SAElD;QAGD,oBAAoB;YAElB,IAAI,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC;gBACpC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;aACxE;YAED,IAAI,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC;gBACpC,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;aACtE;YACD,uBAAuB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACrC,uBAAuB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACtC;KACF;IAED,IAAI,MAAM,CAAC,cAAc,EAAE;QACzB,cAAc,CAAC,MAAM,CAAC,qBAAqB,EAAE,iBAAiB,CAAC,CAAC;;;;;"}